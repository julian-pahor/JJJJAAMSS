using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class InvulnerabilityHightlight : MonoBehaviour
{

    public SkinnedMeshRenderer hair;
    public SkinnedMeshRenderer body;
    bool isGlow;

    public float transitionTime;
    float timer;

    public Material bodyBase;
    public Material hairBase;

    public Material bodyGlow;
    public Material hairGlow;

    private void Start()
    {
        SetIntensity();
     
    }

    private void Update()
    {
        if (isGlow && timer < transitionTime)
        {
            timer += Time.deltaTime;
        }
        else if (!isGlow && timer > 0)
        {
            timer -= Time.deltaTime;
        }
        SetIntensity();

        //no errors
        //no mistakes
        //no mercy
    }

    void SetIntensity()
    {
        float intensity = timer/transitionTime;

        body.material.Lerp(bodyBase, bodyGlow, intensity);
        hair.material.Lerp(hairBase, hairGlow, intensity);
    }

    public void GlowOn()
    {
        if (isGlow)
            return;

        isGlow = true;

    }

    public void GlowOff()
    {
        if (!isGlow)
            return;

        isGlow = false;
    }
}
